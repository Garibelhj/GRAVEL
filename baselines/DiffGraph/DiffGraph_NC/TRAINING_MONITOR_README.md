# DiffGraph Training Monitor

å·²ä¸º `main.py` æ·»åŠ å®Œæ•´çš„è®­ç»ƒè¿›åº¦ç›‘æ§åŠŸèƒ½ã€‚

## ğŸ“Š ç›‘æ§åŠŸèƒ½

### 1. **è®­ç»ƒå¼€å§‹ä¿¡æ¯**
- æ•°æ®é›†åç§°
- è®­ç»ƒé…ç½®ï¼ˆratios, repeats, epochs, batch size, learning rateï¼‰
- å¼€å§‹æ—¶é—´

### 2. **æ¨¡å‹ä¿¡æ¯** (é¦–æ¬¡åˆå§‹åŒ–æ—¶æ˜¾ç¤º)
- è¾“å…¥ç»´åº¦
- ç±»åˆ«æ•°é‡
- æ€»å‚æ•°é‡ï¼ˆå¸¦åƒä½åˆ†éš”ç¬¦ï¼‰
- å¯è®­ç»ƒå‚æ•°é‡
- GPU è®¾å¤‡ä¿¡æ¯

### 3. **å®æ—¶ Epoch è¿›åº¦**
æ¯ä¸ª epoch ç»“æŸåæ˜¾ç¤ºï¼š
- å½“å‰è¿›åº¦ç™¾åˆ†æ¯”
- å½“å‰ epoch ç”¨æ—¶
- å¹³å‡ epoch ç”¨æ—¶
- é¢„è®¡å‰©ä½™æ—¶é—´ (ETA)
- Test Accuracy
- Test Macro-F1
- GPU å†…å­˜ä½¿ç”¨

### 4. **Repeat å®Œæˆç»Ÿè®¡**
æ¯ä¸ª repeat ç»“æŸåæ˜¾ç¤ºï¼š
- Repeat æ€»ç”¨æ—¶
- æœ€ä½³ Test Macro-F1
- æœ€ä½³ Test Micro-F1
- æœ€ä½³ Test AUC
- å¹³å‡ Epoch æ—¶é—´
- æ€» Epochs æ•°
- æœ€å¤§ GPU å†…å­˜

### 5. **Ratio å®Œæˆç»Ÿè®¡**
æ¯ä¸ª ratio ç»“æŸåæ˜¾ç¤ºï¼š
- Ratio æ€»ç”¨æ—¶
- Macro-F1 å‡å€¼ Â± æ ‡å‡†å·®
- Micro-F1 å‡å€¼ Â± æ ‡å‡†å·®
- AUC å‡å€¼ Â± æ ‡å‡†å·®

### 6. **è®­ç»ƒå®Œæˆæ€»ç»“**
æ‰€æœ‰è®­ç»ƒç»“æŸåæ˜¾ç¤ºï¼š
- æ€»è®­ç»ƒæ—¶é—´
- å¹³å‡/æœ€å¿«/æœ€æ…¢ Ratio æ—¶é—´
- æœ€å¤§ GPU å†…å­˜å ç”¨
- GPU è®¾å¤‡ä¿¡æ¯
- æ•°æ®é›†ä¿¡æ¯
- å®Œæˆæ—¶é—´

## ğŸ¯ è¾“å‡ºç¤ºä¾‹

### è®­ç»ƒå¼€å§‹
```
================================================================================
DiffGraph Training Monitor
================================================================================
Dataset: pdns
Total Ratios: 3
Repeats per ratio: 10
Epochs per repeat: 100
Batch size: 256
Learning rate: 0.003
Diffusion steps: 50
================================================================================

================================================================================
Training Ratio 1/3
================================================================================

[Repeat 1/10] Started at 16:30:45

[Model Information]
  Input dimension: 16
  Number of classes: 2
  Total parameters: 156,890
  Trainable parameters: 156,890
  GPU Device: NVIDIA GeForce RTX 3090
```

### Epoch è¿›åº¦
```
[Epoch 1/100] Progress: 1.0% | Time: 12.34s | Avg: 12.34s | ETA: 0:20:21 | Test Acc: 0.8523 | Test Macro-F1: 0.8234 | GPU: 4567.8MB
[Epoch 2/100] Progress: 2.0% | Time: 11.98s | Avg: 12.16s | ETA: 0:19:52 | Test Acc: 0.8645 | Test Macro-F1: 0.8456 | GPU: 4589.2MB
[Epoch 3/100] Progress: 3.0% | Time: 12.10s | Avg: 12.14s | ETA: 0:19:38 | Test Acc: 0.8701 | Test Macro-F1: 0.8589 | GPU: 4598.5MB
...
```

### Repeat å®Œæˆ
```
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[Repeat 1/10 Completed]
  Time: 0:20:15 (1215.67s)
  Best Test Macro-F1: 0.8967
  Best Test Micro-F1: 0.9012
  Best Test AUC: 0.9234
  Avg Epoch Time: 12.16s
  Total Epochs: 100
  Max GPU Memory: 4623.45 MB
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### Ratio å®Œæˆ
```
================================================================================
[Ratio 1/3 Completed]
  Total Time: 3:22:30 (12150.45s)
  Macro-F1 Mean: 0.8945 Â± 0.0123
  Micro-F1 Mean: 0.8998 Â± 0.0098
  AUC Mean: 0.9201 Â± 0.0087
================================================================================
```

### è®­ç»ƒå®Œæˆ
```
================================================================================
Training Completed - Final Summary
================================================================================

[Time Statistics]
  Total Training Time: 10:07:30 (36450.12s)
  Average Ratio Time: 3:22:30 (12150.04s)
  Fastest Ratio Time: 3:18:45 (11925.23s)
  Slowest Ratio Time: 3:25:12 (12312.56s)

[Resource Usage]
  Max GPU Memory: 5234.56 MB (5.11 GB)
  GPU Device: NVIDIA GeForce RTX 3090

[Dataset Information]
  Dataset: pdns
  Total Ratios: 3
  Repeats per ratio: 10
  Epochs per repeat: 100

[Completed at 2025-10-08 19:45:30]
================================================================================
```

## ğŸ“ æ–°å¢åŠŸèƒ½è¯¦è§£

### è¾…åŠ©å‡½æ•°

1. **`count_parameters(model)`**
   - è®¡ç®—æ¨¡å‹æ€»å‚æ•°é‡å’Œå¯è®­ç»ƒå‚æ•°é‡
   - è¿”å›ï¼š`(total_params, trainable_params)`

2. **`format_time(seconds)`**
   - å°†ç§’æ•°æ ¼å¼åŒ–ä¸º HH:MM:SS æ ¼å¼
   - ç¤ºä¾‹ï¼š`3665.5` â†’ `"1:01:05"`

3. **`get_gpu_memory()`**
   - è·å–å½“å‰ GPU å³°å€¼å†…å­˜ä½¿ç”¨ï¼ˆMBï¼‰
   - CPU æ¨¡å¼è¿”å› 0

### ç›‘æ§å±‚çº§

```
Training Monitor
â”œâ”€ Ratio 1/3
â”‚  â”œâ”€ Repeat 1/10
â”‚  â”‚  â”œâ”€ Epoch 1/100  â†’ å®æ—¶è¿›åº¦
â”‚  â”‚  â”œâ”€ Epoch 2/100  â†’ å®æ—¶è¿›åº¦
â”‚  â”‚  â””â”€ ...
â”‚  â”œâ”€ Repeatå®Œæˆç»Ÿè®¡
â”‚  â”œâ”€ Repeat 2/10
â”‚  â””â”€ Ratioå®Œæˆç»Ÿè®¡
â”œâ”€ Ratio 2/3
â””â”€ Trainingå®Œæˆæ€»ç»“
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

æ— éœ€ä¿®æ”¹ä»»ä½•å‚æ•°ï¼Œç›´æ¥è¿è¡Œè®­ç»ƒå³å¯ï¼š

```bash
python main.py --data pdns --epoch 100 --batch 256 --steps 200
```

æ‰€æœ‰ç›‘æ§ä¿¡æ¯ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨æ ‡å‡†è¾“å‡ºä¸­ã€‚

## ğŸ”§ ç‰¹æ€§

### å®æ—¶ ETA è®¡ç®—
- åŸºäºå·²å®Œæˆ epoch çš„å¹³å‡æ—¶é—´
- åŠ¨æ€æ›´æ–°é¢„è®¡å‰©ä½™æ—¶é—´
- éšç€è®­ç»ƒè¿›è¡Œè¶Šæ¥è¶Šå‡†ç¡®

### æ™ºèƒ½é”™è¯¯å¤„ç†
- AUC è®¡ç®—å¤±è´¥æ—¶è‡ªåŠ¨æ•è·å¼‚å¸¸
- æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯å¹¶ç»§ç»­è®­ç»ƒ
- ä¸ä¼šä¸­æ–­è®­ç»ƒæµç¨‹

### GPU å†…å­˜è·Ÿè¸ª
- å®æ—¶æ˜¾ç¤ºæ¯ä¸ª epoch çš„ GPU ä½¿ç”¨
- è®°å½•æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹çš„å³°å€¼å†…å­˜
- æ”¯æŒ CPU å’Œ GPU æ¨¡å¼

### æ€§èƒ½å¼€é”€
- æ—¶é—´è®°å½•ï¼š< 0.1ms
- GPU å†…å­˜æŸ¥è¯¢ï¼š< 1ms
- æ€»å¼€é”€å¯å¿½ç•¥ä¸è®¡

## ğŸ“ˆ ä¸åŸæ—¥å¿—ç³»ç»Ÿå…¼å®¹

- ä¿ç•™åŸæœ‰çš„ `logger.info()` è¾“å‡º
- æ·»åŠ æ›´è¯¦ç»†çš„å®æ—¶è¿›åº¦ä¿¡æ¯
- ä¸å½±å“å†å²æ—¥å¿—æ–‡ä»¶çš„ç”Ÿæˆ

## âš™ï¸ è‡ªå®šä¹‰é€‰é¡¹

å¦‚æœéœ€è¦è°ƒæ•´æ˜¾ç¤ºé¢‘ç‡ï¼Œå¯ä»¥ä¿®æ”¹ `main.py` ä¸­çš„ï¼š

```python
# æ¯Nä¸ªepochæ˜¾ç¤ºä¸€æ¬¡è¿›åº¦ï¼ˆé»˜è®¤ä¸º1ï¼‰
if ep % 1 == 0:  # æ”¹ä¸ºå…¶ä»–æ•°å­—è°ƒæ•´é¢‘ç‡
    # æ˜¾ç¤ºè¿›åº¦...
```

## ğŸ’¡ æç¤º

1. **é•¿æ—¶é—´è®­ç»ƒ**ï¼šå»ºè®®å°†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶
   ```bash
   python main.py --data pdns | tee training_log.txt
   ```

2. **å¤šGPUè®­ç»ƒ**ï¼šGPU å†…å­˜ç»Ÿè®¡ä»…æ˜¾ç¤º GPU 0 çš„ä½¿ç”¨æƒ…å†µ

3. **ä¸­æ–­æ¢å¤**ï¼šä¸­æ–­åé‡æ–°å¼€å§‹ä¼šé‡ç½®æ‰€æœ‰è®¡æ•°å™¨

4. **æ—¥å¿—æ–‡ä»¶**ï¼šè¯¦ç»†çš„åˆ†ç±»ç»“æœä»ä¿å­˜åœ¨ `History/` ç›®å½•

---

**æ›´æ–°æ—¥æœŸ**: 2025-10-08  
**ç‰ˆæœ¬**: v1.0  
**å…¼å®¹æ€§**: DiffGraph NC (Node Classification)

